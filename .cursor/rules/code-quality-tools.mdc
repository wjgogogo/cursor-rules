---
description:
globs:
alwaysApply: false
---
# ä»£ç è´¨é‡å·¥å…·é…ç½®

## ESLint é…ç½® [P0]

ã€å¿…é¡»ã€‘TypeScript + React ESLint é…ç½®ï¼š

```javascript
// .eslintrc.js
module.exports = {
  root: true,
  env: {
    browser: true,
    es2022: true,
    node: true,
  },
  extends: [
    'eslint:recommended',
    '@typescript-eslint/recommended',
    'plugin:react-hooks/recommended',
    'plugin:react/recommended',
    'plugin:react/jsx-runtime',
  ],
  ignorePatterns: ['dist', '.eslintrc.js'],
  parser: '@typescript-eslint/parser',
  parserOptions: {
    ecmaVersion: 'latest',
    sourceType: 'module',
    ecmaFeatures: {
      jsx: true,
    },
  },
  plugins: [
    'react-refresh',
    '@typescript-eslint',
    'react',
  ],
  rules: {
    // React
    'react-refresh/only-export-components': [
      'warn',
      { allowConstantExport: true },
    ],
    'react/prop-types': 'off', // TypeScript å¤„ç†
    'react/react-in-jsx-scope': 'off', // React 17+
    
    // TypeScript
    '@typescript-eslint/no-unused-vars': [
      'error',
      { argsIgnorePattern: '^_' },
    ],
    '@typescript-eslint/explicit-function-return-type': 'off',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
    '@typescript-eslint/no-explicit-any': 'error',
    '@typescript-eslint/no-non-null-assertion': 'error',
    '@typescript-eslint/prefer-nullish-coalescing': 'error',
    '@typescript-eslint/prefer-optional-chain': 'error',
    
    // é€šç”¨
    'no-console': ['warn', { allow: ['warn', 'error'] }],
    'prefer-const': 'error',
    'no-var': 'error',
    'object-shorthand': 'error',
    'prefer-template': 'error',
  },
  settings: {
    react: {
      version: 'detect',
    },
  },
};
```

## Prettier é…ç½® [P0]

ã€å¿…é¡»ã€‘ä»£ç æ ¼å¼åŒ–é…ç½®ï¼š

```json
// .prettierrc
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false,
  "bracketSpacing": true,
  "bracketSameLine": false,
  "arrowParens": "avoid",
  "endOfLine": "lf",
  "quoteProps": "as-needed",
  "jsxSingleQuote": false,
  "proseWrap": "preserve"
}
```

```
# .prettierignore
node_modules
dist
build
coverage
.next
.nuxt
.cache
*.min.js
*.min.css
package-lock.json
yarn.lock
pnpm-lock.yaml
```

## VS Code é…ç½® [P1]

ã€æ¨èã€‘VS Code å·¥ä½œåŒºè®¾ç½®ï¼š

```json
// .vscode/settings.json
{
  // ç¼–è¾‘å™¨è®¾ç½®
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "explicit",
    "source.organizeImports": "explicit"
  },
  "editor.tabSize": 2,
  "editor.insertSpaces": true,
  "editor.detectIndentation": false,
  
  // TypeScript è®¾ç½®
  "typescript.preferences.includePackageJsonAutoImports": "auto",
  "typescript.suggest.autoImports": true,
  "typescript.updateImportsOnFileMove.enabled": "always",
  "typescript.preferences.organizeImports": true,
  
  // æ–‡ä»¶è®¾ç½®
  "files.eol": "\n",
  "files.insertFinalNewline": true,
  "files.trimTrailingWhitespace": true,
  
  // æ’é™¤æ–‡ä»¶
  "search.exclude": {
    "**/node_modules": true,
    "**/dist": true,
    "**/build": true,
    "**/.git": true,
    "**/coverage": true
  },
  
  // æ‰©å±•è®¾ç½®
  "emmet.includeLanguages": {
    "typescript": "html",
    "typescriptreact": "html"
  },
  
  // Tailwind CSS
  "tailwindCSS.includeLanguages": {
    "typescript": "html",
    "typescriptreact": "html"
  },
  "tailwindCSS.experimental.classRegex": [
    ["cva\\(([^)]*)\\)", "[\"'`]([^\"'`]*).*?[\"'`]"],
    ["cx\\(([^)]*)\\)", "(?:'|\"|`)([^']*)(?:'|\"|`)"]
  ]
}
```

```json
// .vscode/extensions.json
{
  "recommendations": [
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "bradlc.vscode-tailwindcss",
    "ms-vscode.vscode-typescript-next",
    "formulahendry.auto-rename-tag",
    "christian-kohler.path-intellisense",
    "ms-vscode.vscode-json",
    "usernamehw.errorlens"
  ]
}
```

## Git Hooks é…ç½® [P0]

ã€å¿…é¡»ã€‘æäº¤å‰ä»£ç æ£€æŸ¥ï¼š

```json
// package.json (éƒ¨åˆ†)
{
  "scripts": {
    "prepare": "husky install"
  },
  "lint-staged": {
    "*.{ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{json,md,css}": [
      "prettier --write"
    ]
  }
}
```

```bash
# .husky/pre-commit
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npx lint-staged
```

```bash
# .husky/commit-msg
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# éªŒè¯æäº¤æ¶ˆæ¯æ ¼å¼
npx commitlint --edit $1
```

## TypeScript ä¸¥æ ¼æ£€æŸ¥ [P0]

ã€å¿…é¡»ã€‘ç±»å‹æ£€æŸ¥è„šæœ¬ï¼š

```json
// package.json scripts è¡¥å……
{
  "scripts": {
    "type-check": "tsc --noEmit",
    "type-check:watch": "tsc --noEmit --watch",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "lint:fix": "eslint . --ext ts,tsx --fix",
    "format": "prettier --write .",
    "format:check": "prettier --check .",
    "check-all": "npm run type-check && npm run lint && npm run format:check"
  }
}
```

## ç¼–è¾‘å™¨é…ç½® [P1]

ã€æ¨èã€‘é€šç”¨ç¼–è¾‘å™¨é…ç½®ï¼š

```ini
# .editorconfig
root = true

[*]
charset = utf-8
end_of_line = lf
insert_final_newline = true
trim_trailing_whitespace = true
indent_style = space
indent_size = 2

[*.md]
trim_trailing_whitespace = false

[*.{yml,yaml}]
indent_size = 2

[*.json]
indent_size = 2
```

## å¸¸ç”¨å¼€å‘è„šæœ¬ [P1]

ã€æ¨èã€‘ä¾¿åˆ©çš„å¼€å‘è„šæœ¬ï¼š

```json
// package.json scripts å®Œæ•´ç‰ˆ
{
  "scripts": {
    // å¼€å‘
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    
    // ä»£ç è´¨é‡
    "type-check": "tsc --noEmit",
    "type-check:watch": "tsc --noEmit --watch",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "lint:fix": "eslint . --ext ts,tsx --fix",
    "format": "prettier --write .",
    "format:check": "prettier --check .",
    
    // ç»¼åˆæ£€æŸ¥
    "check-all": "npm run type-check && npm run lint && npm run format:check",
    "fix-all": "npm run lint:fix && npm run format",
    
    // Git hooks
    "prepare": "husky install",
    
    // æ¸…ç†
    "clean": "rm -rf dist node_modules/.cache",
    "clean:all": "rm -rf dist node_modules package-lock.json && npm install",
    
    // ä¾èµ–æ£€æŸ¥
    "deps:check": "npx npm-check-updates",
    "deps:update": "npx npm-check-updates -u && npm install"
  }
}
```

## æäº¤æ¶ˆæ¯éªŒè¯ [P1]

ã€æ¨èã€‘Commitlint é…ç½®ï¼š

```javascript
// commitlint.config.js
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      [
        'feat',     // æ–°åŠŸèƒ½
        'fix',      // ä¿®å¤
        'docs',     // æ–‡æ¡£
        'style',    // æ ¼å¼
        'refactor', // é‡æ„
        'perf',     // æ€§èƒ½
        'test',     // æµ‹è¯•
        'chore',    // å·¥å…·
        'ci',       // CI
        'build',    // æ„å»º
      ],
    ],
    'subject-max-length': [2, 'always', 50],
    'subject-case': [2, 'never', ['upper-case']],
  },
};
```

## ğŸ” æ£€æŸ¥æ¸…å•

åœ¨è®¾ç½®ä»£ç è´¨é‡å·¥å…·æ—¶ï¼Œã€å¿…é¡»ã€‘ç¡®è®¤ï¼š

### åŸºç¡€å·¥å…· [P0]
- [ ] **[P0]** ESLint é…ç½®ï¼šæ˜¯å¦æ­£ç¡®é…ç½®äº† TypeScript å’Œ React è§„åˆ™ï¼Ÿ
- [ ] **[P0]** Prettier é…ç½®ï¼šæ˜¯å¦è®¾ç½®äº†ç»Ÿä¸€çš„ä»£ç æ ¼å¼åŒ–è§„åˆ™ï¼Ÿ
- [ ] **[P0]** Git Hooksï¼šæ˜¯å¦é…ç½®äº† Husky å’Œ lint-staged è¿›è¡Œæäº¤å‰æ£€æŸ¥ï¼Ÿ
- [ ] **[P0]** TypeScript æ£€æŸ¥ï¼šæ˜¯å¦æ·»åŠ äº†ç±»å‹æ£€æŸ¥è„šæœ¬ï¼Ÿ

### ç¼–è¾‘å™¨é›†æˆ [P1]
- [ ] **[P1]** VS Code è®¾ç½®ï¼šæ˜¯å¦é…ç½®äº†æ¨èçš„ç¼–è¾‘å™¨è®¾ç½®å’Œæ‰©å±•ï¼Ÿ
- [ ] **[P1]** EditorConfigï¼šæ˜¯å¦åˆ›å»ºäº†é€šç”¨ç¼–è¾‘å™¨é…ç½®ï¼Ÿ
- [ ] **[P1]** å¼€å‘è„šæœ¬ï¼šæ˜¯å¦æ·»åŠ äº†ä¾¿åˆ©çš„å¼€å‘å’Œæ£€æŸ¥è„šæœ¬ï¼Ÿ

### å¯é€‰ä¼˜åŒ– [P2]
- [ ] **[P2]** Commitlintï¼šæ˜¯å¦é…ç½®äº†æäº¤æ¶ˆæ¯éªŒè¯ï¼Ÿ
- [ ] **[P2]** ä¾èµ–æ£€æŸ¥ï¼šæ˜¯å¦æ·»åŠ äº†ä¾èµ–æ›´æ–°æ£€æŸ¥è„šæœ¬ï¼Ÿ
