---
description: 
globs: 
alwaysApply: true
---
# Context7 MCP é›†æˆè§„èŒƒ

> **å¼ºåˆ¶è¦æ±‚**ï¼šåœ¨ä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹æ¡†æ¶ã€npm åŒ…æˆ–åº“å®ç°ä»£ç åŠŸèƒ½æ—¶ï¼Œå¿…é¡»é¦–å…ˆé€šè¿‡ Context7 MCP è·å–æœ€æ–°çš„å®˜æ–¹æ–‡æ¡£å’Œæœ€ä½³å®è·µæŒ‡å¯¼ã€‚

## é€‚ç”¨åœºæ™¯

### ğŸ”„ å¿…é¡»ä½¿ç”¨ Context7 MCP çš„æƒ…å†µ

ä»¥ä¸‹æƒ…å†µä¸‹å¿…é¡»è°ƒç”¨ Context7 MCP è·å–æ–‡æ¡£ï¼š

1. **å¼•å…¥æ–°çš„ npm åŒ…æˆ–åº“**
   - é¦–æ¬¡åœ¨é¡¹ç›®ä¸­ä½¿ç”¨æŸä¸ªåº“
   - å‡çº§ç°æœ‰åº“çš„ç‰ˆæœ¬
   - æ›¿æ¢ç°æœ‰çš„åº“æˆ–æ¡†æ¶

2. **å®ç°å¤æ‚åŠŸèƒ½**
   - ä½¿ç”¨åº“çš„é«˜çº§ API æˆ–é…ç½®
   - é›†æˆå¤šä¸ªåº“çš„å¤åˆåŠŸèƒ½
   - æ€§èƒ½ä¼˜åŒ–ç›¸å…³çš„å®ç°

3. **è§£å†³é—®é¢˜å’Œè°ƒè¯•**
   - é‡åˆ°åº“ç›¸å…³çš„ bug æˆ–é”™è¯¯
   - éœ€è¦äº†è§£æœ€ä½³å®è·µ
   - æŸ¥æ‰¾ç‰¹å®šç”¨ä¾‹çš„è§£å†³æ–¹æ¡ˆ

4. **ä»£ç é‡æ„å’Œä¼˜åŒ–**
   - æ›´æ–°è¿‡æ—¶çš„ API ä½¿ç”¨æ–¹å¼
   - é‡‡ç”¨æ–°çš„æ¨èæ¨¡å¼
   - æå‡ä»£ç è´¨é‡å’Œæ€§èƒ½

## ä½¿ç”¨æµç¨‹

### ç¬¬ä¸€æ­¥ï¼šè§£æåº“ ID

åœ¨ä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹åº“ä¹‹å‰ï¼Œé¦–å…ˆè§£æè·å– Context7 å…¼å®¹çš„åº“ IDï¼š

```tsx
// ç¤ºä¾‹ï¼šå‡†å¤‡ä½¿ç”¨ React Query åº“
// æ­¥éª¤1: è§£æåº“ID (ç”±AIåŠ©æ‰‹è°ƒç”¨ resolve-library-id)
// è¾“å…¥: "React Query" æˆ– "@tanstack/react-query"
// è¾“å‡º: "/tanstack/react-query" æˆ–å…·ä½“ç‰ˆæœ¬å¦‚ "/tanstack/react-query/v4.29.0"
```

### ç¬¬äºŒæ­¥ï¼šè·å–æ–‡æ¡£

ä½¿ç”¨è§£æå¾—åˆ°çš„åº“ ID è·å–è¯¦ç»†æ–‡æ¡£ï¼š

```tsx
// æ­¥éª¤2: è·å–æ–‡æ¡£ (ç”±AIåŠ©æ‰‹è°ƒç”¨ get-library-docs)
// è¾“å…¥: context7CompatibleLibraryID: "/tanstack/react-query"
// å¯é€‰å‚æ•°:
// - topic: "hooks" | "caching" | "mutations" ç­‰ç‰¹å®šä¸»é¢˜
// - tokens: æ–‡æ¡£ä»¤ç‰Œæ•°é‡ (é»˜è®¤ 10000)
```

### ç¬¬ä¸‰æ­¥ï¼šåŸºäºæ–‡æ¡£å®ç°

ä¸¥æ ¼æŒ‰ç…§è·å–çš„æœ€æ–°æ–‡æ¡£å®ç°åŠŸèƒ½ï¼š

```tsx
// âœ… åŸºäº Context7 æ–‡æ¡£çš„æ­£ç¡®å®ç°
import { useQuery, QueryClient, QueryClientProvider } from '@tanstack/react-query';

// æ ¹æ®æ–‡æ¡£å»ºè®®çš„æœ€ä½³å®è·µé…ç½®
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 1000 * 60 * 5, // 5 minutes
      refetchOnWindowFocus: false,
    },
  },
});

function UserProfile({ userId }: { userId: string }) {
  // ä½¿ç”¨æ–‡æ¡£ä¸­æ¨èçš„ hook æ¨¡å¼
  const { data: user, isLoading, error } = useQuery({
    queryKey: ['user', userId],
    queryFn: () => fetchUser(userId),
    enabled: !!userId, // æ–‡æ¡£å»ºè®®çš„æ¡ä»¶æŸ¥è¯¢æ¨¡å¼
  });

  if (isLoading) return <div>Loading...</div>;
  if (error) return <div>Error: {error.message}</div>;
  
  return <div>{user?.name}</div>;
}

// âŒ æœªæŸ¥é˜…æ–‡æ¡£çš„è¿‡æ—¶å®ç°
function UserProfileOld({ userId }: { userId: string }) {
  // ä½¿ç”¨è¿‡æ—¶çš„ API æ¨¡å¼
  const { data: user, isLoading, error } = useQuery(
    ['user', userId], // æ—§ç‰ˆæœ¬çš„æ•°ç»„æ ¼å¼
    () => fetchUser(userId),
    {
      enabled: !!userId,
      // ç¼ºå°‘æ¨èçš„é…ç½®é€‰é¡¹
    }
  );
  
  // ç¼ºå°‘é”™è¯¯å¤„ç†ç­‰æœ€ä½³å®è·µ
  return <div>{user?.name}</div>;
}
```

## å·¥ä½œæµç¨‹ç¤ºä¾‹

### åœºæ™¯ä¸€ï¼šæ·»åŠ æ–°çš„çŠ¶æ€ç®¡ç†åº“

```typescript
// éœ€æ±‚ï¼šä¸ºé¡¹ç›®æ·»åŠ  Zustand çŠ¶æ€ç®¡ç†

// æ­¥éª¤1: AIåŠ©æ‰‹è°ƒç”¨ resolve-library-id("zustand")
// ç»“æœ: "/pmndrs/zustand"

// æ­¥éª¤2: AIåŠ©æ‰‹è°ƒç”¨ get-library-docs({
//   context7CompatibleLibraryID: "/pmndrs/zustand",
//   topic: "typescript setup",
//   tokens: 8000
// })

// æ­¥éª¤3: åŸºäºè·å–çš„æ–‡æ¡£å®ç°
interface UserStore {
  user: User | null;
  setUser: (user: User) => void;
  clearUser: () => void;
}

// ä½¿ç”¨æ–‡æ¡£ä¸­æ¨èçš„ TypeScript æ¨¡å¼
const useUserStore = create<UserStore>((set) => ({
  user: null,
  setUser: (user) => set({ user }),
  clearUser: () => set({ user: null }),
}));

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ - éµå¾ªæ–‡æ¡£çš„æœ€ä½³å®è·µ
function UserComponent() {
  const { user, setUser } = useUserStore();
  // ... å®ç°ç»†èŠ‚
}
```

### åœºæ™¯äºŒï¼šAPI å®¢æˆ·ç«¯åº“é›†æˆ

```typescript
// éœ€æ±‚ï¼šé›†æˆ Axios è¿›è¡Œ API è°ƒç”¨

// æ­¥éª¤1: resolve-library-id("axios")
// æ­¥éª¤2: get-library-docs({ 
//   context7CompatibleLibraryID: "/axios/axios",
//   topic: "interceptors configuration",
//   tokens: 10000 
// })

// æ­¥éª¤3: æŒ‰æ–‡æ¡£å®ç°
import axios, { AxiosInstance, AxiosRequestConfig } from 'axios';

// åŸºäºæ–‡æ¡£çš„æ¨èé…ç½®
const apiClient: AxiosInstance = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_BASE_URL,
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
  },
});

// ä½¿ç”¨æ–‡æ¡£æ¨èçš„æ‹¦æˆªå™¨æ¨¡å¼
apiClient.interceptors.request.use(
  (config) => {
    const token = getAuthToken();
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => Promise.reject(error)
);

apiClient.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      // æ ¹æ®æ–‡æ¡£å¤„ç†è®¤è¯é”™è¯¯
      handleAuthError();
    }
    return Promise.reject(error);
  }
);
```

### åœºæ™¯ä¸‰ï¼šUI ç»„ä»¶åº“ä½¿ç”¨

```typescript
// éœ€æ±‚ï¼šä½¿ç”¨ Radix UI ç»„ä»¶

// æ­¥éª¤1: resolve-library-id("@radix-ui/react-dialog")
// æ­¥éª¤2: get-library-docs({
//   context7CompatibleLibraryID: "/radix-ui/primitives",
//   topic: "dialog accessibility",
//   tokens: 12000
// })

// æ­¥éª¤3: æŒ‰æ–‡æ¡£çš„å¯è®¿é—®æ€§æŒ‡å—å®ç°
import * as Dialog from '@radix-ui/react-dialog';

function UserModal({ children }: { children: React.ReactNode }) {
  return (
    <Dialog.Root>
      <Dialog.Trigger asChild>
        {children}
      </Dialog.Trigger>
      <Dialog.Portal>
        <Dialog.Overlay className="fixed inset-0 bg-black/50" />
        <Dialog.Content 
          className="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
          // æ–‡æ¡£è¦æ±‚çš„å¯è®¿é—®æ€§å±æ€§
          aria-describedby="modal-description"
        >
          <Dialog.Title className="text-lg font-semibold">
            User Information
          </Dialog.Title>
          <Dialog.Description id="modal-description">
            View and edit user details
          </Dialog.Description>
          
          {/* Modal content */}
          
          <Dialog.Close asChild>
            <button aria-label="Close modal">Ã—</button>
          </Dialog.Close>
        </Dialog.Content>
      </Dialog.Portal>
    </Dialog.Root>
  );
}
```

## å¼ºåˆ¶æ£€æŸ¥æ¸…å•

åœ¨æ¯æ¬¡ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å®ç°åŠŸèƒ½æ—¶ï¼Œå¿…é¡»ç¡®è®¤ï¼š

- [ ] **æ–‡æ¡£è·å–**ï¼šå·²é€šè¿‡ Context7 MCP è·å–æœ€æ–°æ–‡æ¡£
- [ ] **ç‰ˆæœ¬ç¡®è®¤**ï¼šä½¿ç”¨çš„ API ä¸æ–‡æ¡£ç‰ˆæœ¬åŒ¹é…
- [ ] **æœ€ä½³å®è·µ**ï¼šéµå¾ªæ–‡æ¡£ä¸­çš„æ¨èæ¨¡å¼å’Œé…ç½®
- [ ] **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨æ­£ç¡®çš„ TypeScript ç±»å‹å®šä¹‰
- [ ] **é”™è¯¯å¤„ç†**ï¼šå®ç°æ–‡æ¡£å»ºè®®çš„é”™è¯¯å¤„ç†æ–¹å¼
- [ ] **æ€§èƒ½ä¼˜åŒ–**ï¼šé‡‡ç”¨æ–‡æ¡£æ¨èçš„æ€§èƒ½æœ€ä½³å®è·µ
- [ ] **å¯è®¿é—®æ€§**ï¼šéµå¾ªæ–‡æ¡£çš„å¯è®¿é—®æ€§æŒ‡å—ï¼ˆå¦‚é€‚ç”¨ï¼‰

**é‡è¦æé†’**ï¼šContext7 MCP æä¾›çš„æ˜¯å®æ—¶æ›´æ–°çš„å®˜æ–¹æ–‡æ¡£ï¼Œç¡®ä¿æ‚¨å§‹ç»ˆä½¿ç”¨æœ€æ–°ã€æœ€æ­£ç¡®çš„å®ç°æ–¹å¼ã€‚è¿™æ˜¯ä»£ç è´¨é‡çš„é‡è¦ä¿éšœï¼Œä¸å¯å¿½è§†ï¼
